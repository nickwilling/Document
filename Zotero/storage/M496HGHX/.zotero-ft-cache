第 47 卷 第 5 期 Vol.47 No.5

河北工业大学学报 JOURNAL OF HEBEI UNIVERSITY OF TECHNOLOGY

2018 年 10 月 October 2018

文章编号：1007-2373（2018）05-0017-06

DOI：10.14081/j.cnki.hgdxb.2018.05.003

基于多传感器数据融合的火灾探测系统

丁承君，赵泽羽
（河北工业大学 机械工程学院，天津 300130）

摘要 针对目前火灾探测系统中存在的问题，提出了一种多传感器数据融合技术来实现火情的探测，并通过

实际采集的数据进行仿真结果验证 . 重点研究如何实现对火灾的提前预警功能，以满足当今社会的需求 . 这种

采用多传感器数据融合技术对火灾现场进行数据采集分析，利用了改进的 BP 神经网络和模糊推理技术的多传

感器数据融合的方法，来实现火情的预测，避免了在单一传感器预测中的漏报误报的缺点，能够有效地提高

火灾的识别能力以及火情预测的快速性，改善了火灾探测系统的准确度，仿真结果证明了此方法的可靠性 .

关 键 词 多传感器；火灾探测；BP 神经网络；模糊逻辑推理

中图分类号 X932；TP277

文献标志码 A

Fire detection system based on multi - sensor data fusion

DING Chengjun, ZHAO Zeyu

（School of Mechanical Engineering, Hebei University of Technology, Tianjin 300130）
Abstract Aiming at solving the problems in the current fire detection system, a multi-sensor data fusion technology is proposed to realize the detection of fire, and the simulation results are verified by the actual data collected. Focusing on how to achieve the early warning function of the fire to meet the needs of today's society. This multi-sensor data fusion technology is used to analyze the data of the fire scene, and the multi-sensor data fusion method of the improved BP neu⁃ ral network and the fuzzy reasoning technology is used to realize the prediction of the fire and avoid the prediction of the single sensor. The shortcomings of false alarming can improve the recognition ability of fire and the rapidity of fire fore⁃ casting, and improve the accuracy of fire detection system. The simulation results prove the reliability of the method. Key words multi-sensor; fire detection; BP neuralnetwork; fuzzylogic reasoning

0 引言
火灾是目前现代人类社会中最频发、最严重的灾害之一，近年来一次次血与火的教训给人民生产、生 活带来严重威胁 . 如 2004 年 2 月 15 日，吉林市中百商厦发生特大火灾，造成 54 人死亡、70 人受伤 . 2009 年 2 月 9 日，北京市央视新址大楼发生特大火灾，最终造成 1 人死亡，30 人受伤 . 2010 年 11 月 15 日， 上海靖安胶州路公寓楼发生特大火灾，酿成 58 人死亡，70 余人受伤的惨剧 . 这些实例告诉我们火灾危害不 容忽视 .
早期火灾探测方法是主要基于接触式火灾探测，如感温式火灾探测和感烟式火灾探测法 . 此类探测技 术利用探测头周围的温度或空气浓度触发报警装置，原理简单，易于工程实现；同时也存在发现火情滞 后、适用范围空间小，漏报误报率高等缺点[1-2]. 基于红外技术火焰传感器利用火焰红外光谱特性，进行火 焰检测报警，此类传感器精度较低，检测范围有限，安装成本高，不宜大范围推广 . 探测火焰时，通常利 用烟雾传感器，一氧化碳传感器，温度传感器，红外探测器等多种手段 . 每种手段都有其特点，在某些情 况下具备较高的探测精度，但是每种传感器都有其缺陷 . 如果能综合利用多种传感器数据[3-4]，将会大大提

收稿日期：2017-06-22 基金项目：天津市科技支撑计划 （15ZXHLGX0210，14ZCDZGX00811，13ZCZDGX01200）；天津市产学研合作项目 （14ZCZDSF00025）；
天津市 863 成果转化项目 （13RCHZGX01116，14RCHZGX00862） 作者简介：丁承君 （1973—），男，教授，博士，190532210@qq.com .

18

河北工业大学学报

第 47 卷

高探测精度，然而多种传感器数据的融合是一个难点 . 神经网络在多传感器数据融合的实际应用中，主要是依赖于其自身强大的学习与组织能力，根据具体
实际情况的需要，对多传感器数据融合的知识进行学习，不断调整系统的网络权值与阈值，加强数据融合 的稳定性，已达到实际需要. 把神经网络应用到数据融合当中去，应遵循设计的要求建立相应的网络模 型，再按照某种选定的学习算法对前面建立的网络模型进行训练学习，训练成熟后的网络会自动生成网络 权值与阈值，最终将成熟的神经网络模型应用于数据融合实现测试 .
1 火灾探测系统的数据融合系统
本文利用的是多传感器数据融合系统[5]来完成火灾探测的目的的，在融合过程中，将其分为 3 个层次来 完成的，即信息层、特征层以及决策层的融合 . 如图 1 所示 .

火灾现场

温度传感器 CO 传感器 烟雾传感器 红外线传感器

信息的预处理 信息的预处理 信息的预处理 信息的预处理

神经网络 融合系统

判断分析与 模糊推理

无火情 警戒 报警
严重报警

图 1 火灾探测融合系统结构图 Fig.1 Structure of fire detection fusion system

1.1 信息层实现 本文选用了 4 种传感器来实现对火灾的探测，即：温度、CO、红外线和烟雾传感器 . 在不同的环境下
多个传感器所探测到的数据有着很大的不确定性；在本文中，选取一些典型的数据[6-7]作为此次训练的样本 集，如表 1 所示，其为数据预处理后的样本集 .

温度
0.9 0.925 0.975 0.975 1 1 0.9 0.45 0.45 0.45 0.45 0.5 0.525 0.55 0.375 0.45 0.6 0.625 0.6 0.75 1

烟雾
0.13 0.18 0.17 0.2 0.22 0.25 0.22 0.15 0.15 0.17 0.18 0.33 0.5 0.83 0.37 0.43 0.7 0.16 1 0.15 0.67

表 1 样本数据集 Tab.1 Sample data set

CO

红外线

明火概率

0.2

0.65

0.795 7

0.25

0.625

0.791 1

0.5

0.825

0.853 2

0.8

0.85

0.892 8

0.85

0.825

0.913 3

1

0.875

0.943 5

1

0.825

0.927 2

0.5

0.2

0.156 3

0.65

0.225

0.127 7

0.75

0.25

0.100 2

0.75

0.3

0.097 3

0.75

0.375

0.074 4

0.75

0.3

0.064 2

0.75

0.315

0.069 3

0.45

0.4

0.106 2

0.45

0.45

0.092 3

0.45

0.55

0.099 9

0.5

0.635

0.087 3

0.5

0.8

0.197 9

0.75

0.8

0.096 3

0.7

0.75

0.183 9

实际输出 阴燃火概率
0.097 5 0.093 4 0.105 8 0.082 4 0.076 8 0.044 8 0.069 4 0.796 0.811 2 0.854 2 0.865 4 0.926 6 0.935 7 0.935 5 0.091 1 0.098 5 0.110 3 0.054 2 0.089 6 0.065 2 0.079 3

无火概率 0.091 8 0.108 4 0.054 1 0.014 3 0.011 7 0.069 4 0.009 3 0.051 4 0.050 1 0.037 1 0.031 0.013 2 0.013 1 0.012 0.853 0.842 6 0.802 6 0.898 7 0.697 2 0.844 1 0.693 9

第5期

丁承君，等：基于多传感器数据融合的火灾探测系统

19

文中信息预处理采用归一化方法，使其范围在 0 到 1 之间 . 归一化公式如式 （1） 所示 .

AJ

=

XJ - Xmin

X - X max

min

，

（1）

式中 ：AJ 为参量 J 输入的归一化之后的值；J 代表采集温度、烟雾、CO 数据的第 J 个参量；X 表示根据实验

数据确定的参量 J 的输入值； Xmin 为实验数据确定的最小输入值； Xmax 为实验数据确定的最大输入值 .

1.2 特征层实现

本文的火灾探测系统的特征层主要是应用了神经网络技术，通过其自学习能力对采集到的样本数据进

行训练，其误差结果校正采用 L-BFGS 算法来更新，将结果归纳在权值矩阵中 .

在该消防报警系统中，选用以非线性系统辨识的 3 层 BP 神经网络[8-9]，即通过调节权值使实际输出与期

望输出的总均方差最小[10]；对权值更新的方法采用 L-BFGS 算法，而不是传统的 L-M 算法，更新速度快，

耗时时间短；选取本次采用的样本集为 BP 网络的输入信号和期望信号，通过 BP 网络的学习训练得到训练

之后的实际输出概率，将实际输出概率值与期望概率值做差，若差值满足误差要求，则停止训练，若差值

不满足误差要求，则通过反向传播路径来进一步更新权值，直至满足误差要求或者达到迭代周期上限 . 本

论文隐含层的传递函数采用双曲正切 S 型函数，输出层采用 S 型函数[11]，其表达式如式 （2）、（3） 所示 . 系统

结构图如图 2 所示 .

f

(x)

=

1

2 + e-2x

-

1

，

f

(x)

=

1

1 + e-x

.

（2） （3）

更新权值

更新权值

温度
CO 红外线
烟雾

明火概率 阴燃火概率
无火概率

L-BFGS 算法 误差

输入层

隐含层

输出层

图 2 BP 神经网络结构图 Fig.2 Structure of BP neural network
如图 2 所示，BP 算法网络结构选用的是 3 层网络结构模式，即一个输入层一个输出层和一个中间隐含 层的模式；输入层有 4 个神经元节点，分别来自温度传感器、烟雾传感器、CO 传感器和红外线传感器所采 集的传感器数据；选取输入和输出之间的隐层为 7 个神经元节点；输出层定义 3 个神经元节点，分别为明 火、阴燃火和无火概率，其训练输出的值为[0 1]. 本文通过对输出结果与期望输出作比较来得出误差值， 如果误差过大则采用 L-BFGS 算法来完成对隐含层和输出层权值的调整 . 其算法基本步骤为：
1） 选取初始点 x0，取允许误差 ε > 0，存储最近迭代的次数 m （m 一般取值为 3~10，对于公式 （5） 来 说，m 取值在 6 以上，其算法结果相差不大，但其复杂度却成倍增加，故这里 m 取 6 较为合适） .
2） 令 K = 0，H0 = I，rk = ÑE(xk)，E 为总误差 . 3） 如果||ÑE(xk)||≤ε，则可以返回最优解 xk，否则转到下步 . 4） 计算本次可行迭代方向：Pk = -rk . 5） 计算每次步长 αk > 0，使得步长满足如式 （4），

20

河北工业大学学报

第 47 卷

E(xk

+

αk

Pk)

=

min
α≥0

E(xk

+

αPk)

.

6） 更新权重系数 x，有 xk+1 = xk + αk Pk .

7） 其中如果 k > m，则只保留最近 m 次的向量对，需要删除 (sk-m yk ) -m .

8） 计算并保存 sk = xk+1 - xk yk = ∇ f (xk )+1 - ∇ f (xk) .

（4）

9） 用 two-loop recursion 算法求得可行方向： rk = Hk∇ f（xk），然后令 k=k+1，转第 3 步 . 其中海森近似矩 阵的迭代公式如式 （5） 所示

H = （V V …V ）H（V V …V ） + （V V …V ）s ρ s （V V …V ） + … T T

T

0T

T

T

k

k-1 k-2

k-m

k

k-m k-m+1

k-1

TT

T

T

T

T

T

k-1 k-2

k-m+1

k-m k-m k-m k-m k-m+1

k-1

V s ρ s V + s ρ s ， T

T

k-1 k-2 k-2 k-2 k-1

T k-1 k-1 k-1

（5）

式中

ρk

=

1

yT k

s

k

V

k

=

1

-

ρ

k

y

k

sT k

.

1.3 决策层实现

1.3.1 决策因子的构建

本文利用模糊算法来完成决策层的数据融合，将特征层的输出的结果 （明火、阴燃火概率） 作为输

入；同时引进决策因子的概念，来达到决策层输出不同任务的目的；本文中采用的决策因子共 4 个，分别

为：明火概率以及阴燃火概率、火灾的持续时间、建筑保护等级 . 因此该系统具有 4 个输入量，即：明火概

率 （Y1）、阴燃火概率 （Y2）、火灾持续时间 （T） 和火灾保护等级 （L）；一个输出量，即：火灾报警等级 U. 其中火灾持续时间 T 的计算公式如式 （6） 所示

T(n) = [T (n + 1) + 1] × U(Yi(x) - Td) ，

（6）

式中： Yi(x) 为特征层输出的明火、阴燃火概率； U(x) 为阶跃函数； Td 为报警阈值 . 在本文中，建筑物的保护等级是由其本身材料和周围物体来决定的，若其四周摆放的是危险品，则设

其保护等级为高；若其周围摆放的为不可燃物，则设其保护等级为低，它具有一定的灵活性 . 同时，也要

考虑其火灾发生后的结果对人们造成的严重性 .

1.3.2 决策层信息融合

决策层的引入是要得出火灾探测的结果，也就是所求的输出，其决策依据为之前所选取的决策因子，

再使用模糊推理技术完成决策层的融合 . 模糊推理的输入变量和输出变量都是模糊变量[12]，这对于解决本次

模型具有一定的优势 . 模糊推理技术[13]的实现步骤如下：

1） 输入输出量的模糊化

在决策层中，输入量为明火、阴燃火概率以及火灾持续时间和保护等级，将其化为 3 个模糊量，即正

大 （PB）、正中 （PM）、正小 （PS）；隶属度函数采用高斯函数 . 输出量为火灾的概率，将其化为 4 个模糊

量，即无 （PN）、小 （PS）、中 （PM）、大 （PB），隶属度函数采用三角形函数 .

2） 模糊逻辑推理

大多数情况下，模糊规则采用的是马达尼法，

根据其关系，本文提出了 81 条模糊控制规则 . 如

图 3 所示 .

3） 解模糊过程

通过模糊规则出来的结果也一样是模糊的，必

须先解除其模糊的性质，这就要求对其进行解模糊

过程 . 在这里采用面积重心法对模糊集合进行解模

糊化处理 . [14] 面积重心法即加权平均法的如式 （7）

所示 .

∫u(z)zdz

U= z

，

∫u(z)dz

z

式中 u(z)是输出的隶属度函数 .

（7）

图 3 模糊控制规则 Fig.3 Fuzzy control rules

第5期

丁承君，等：基于多传感器数据融合的火灾探测系统

21

根据建筑物的保护级别以及各个建筑 物需要采取的消防措施，对解模糊化处理 的结果 U 进行判断，将决策层输出分为 4 个 等级，即无火情、警戒、报警以及严重报 警 . 将 U < 0.25 判决为“无火情”，表示一 切正常；将 0.25 < U≤0.5 判决为“警戒”， 代表此区域有异常信号，需提高警惕，应 对突发状况，但不启动消防设备；将 0.5 < U≤0.75 判决为“报警”，表示此区域有火 情，但并不严重，需疏导人员离开并启动 消 防 设 备 ； 将 U≥0.75 判 决 为 “ 严 重 报 警”，表示此区域火情十分严重，已经危急 人们生命财产安全，应立即采取灭火措 施，启动消防设备，阻止火势蔓延 .
2 火灾探测系统的仿真分析
在这里，采用 Matlab 仿真软件进行特 征层和决策层的仿真分析，这样更便于观 察仿真结果 . 2.1 火灾探测系统的特征层仿真
在本论文中，输入节点为 4 个，输出 节点为 3 个，goal 值设置为 0.001，中间层 节点为 7 个 . 采用基于 L-BFGS 算法优化的 BP 神经网络，更新速度快，耗时时间短； 下面给出 L-BFGS 优化神经网络与 GDM 优 化神经网络的训练图像对比图，如图 4、图 5 所示 . 利用 L-BFGS 对神经网络进行优化， 只需要 10 个回合，就可以使得训练错误率 降低到 0.01 以下，最终收敛只需要 42 次迭 代；GDM 算法下的神经网络收敛速度和测 试性能 . 总共进行了 6 000 次迭代，在精度 上和收敛速度上都有明显差距 . 2.2 火灾检测系统的决策层仿真分析
在决策层中，同样使用 Matlab 仿真软 件进行分析，其模糊推理系统如图 6 所示 .
由上述可知，决策层的输入量可化为 3 个模糊集，输出量可为 4 个模糊集 . 通过模 糊推理器可得到决策层输出数据进而判断 火灾的警戒等级；在本文的仿真实验中， 将特征层仿真得到的明火概率和引燃火概 率作为决策层的输入，持续时间假定长时 间，来分别模拟建筑保护等级为低级和高 级的仿真实验 . 具体数据如图 7、图 8 所示 .

Cross-Entropy

100

Train

Validation

Test

Best

102

Fig.4

0 5 10 15 20 25 30 35 40 42 Epochs
图 4 L-BFGS 优化神经网络的收敛图像 Convergence Images of L-BFGS Optimized Neural Networks

Cross-Entropy

100 Train

Validation

101

Test Best

102 0 1 000 2 000 3 000 4 000 5 000 6 000 6 000 Epochs
图 5 GDM 优化神经网络的收敛图像 Fig.5 Convergence Image of GDM Optimized Neural Network

明火概率 阴燃火概率 火灾持续时间 保护等级

Untitled （mamdani）
图 6 模糊推理系统 Fig.6 Fuzzy reasoning system

output1

图 7 持续时间长、保护等级低的仿真结果 Fig.7 Simulation results with long duration and low protection level

22

河北工业大学学报

第 47 卷

3 结论

本文是以改进的 BP 神经网络和模糊逻辑推 理技术为出发点，从 3 个层次分析了信息融合 的方法，为本文提供了理论研究基础，对于火 灾探测系统有了更清晰的认识 .
在本文中，采用归一化方法对传感器采集 的数据进行处理，减少了特征层的工作量，提 高了整体性能 . 特征层采用了 BP 神经网络对样 本进行训练，采用了 L-BFGS 算法来更新权值 完成对总误差的更新，得出期望值，通过 Mat⁃ lab 仿真得出仿真结果与期望输出基本吻合，这 种方案较传统的算法具有明显的优势. 决策层 采用模糊推理技术，通过建立的 81 条模糊推理 规则，计算出本文所需的输出结果与期望输出 结果一致 .

图 8 持续时间长、保护等级高的仿真结果 Fig.8 Simulation results with long duration and high protection level

参考文献:

[1] 罗春贺 . 基于物联网技术的地铁安全监控系统研究[D]. 大连：大连理工大学，2013. [2] 佟瑞鹏，高平，刘欣，等 . 大型活动事故风险评价模型与方法研究[J]. 中国安全科学学报，2014，24（3）：150-155. [3] 李正周，方朝阳，顾园山 . 基于无线多传感器信息融合的火灾检测系统[J]. 数据采集与处理，2014，29（5）：694-698. [4] 高朝春 . 一种基于多信息融合的火灾预警系统[J]. 信息技术与信息化，2014（9）：86-87. [5] 李凤娟 . 数据融合技术在基于物联网的火灾探测系统中的应用研究[D]. 长春：吉林大学，2015. [6] 中国国家标准汇编[S]. 北京:中国标准出版社，2014. [7] 吴龙标，袁宏永，疏学明 . 火灾探测与控制工程[M]. 合肥:中国科学技术大学出版社，2013. [8] Tomkewitch R.Fire detection system with“distributed Intelligenee”，the puls polling system[J]. Fire Safety journal，2012，9（6）：225-231. [9] 王明强，钱兴达，刘志强 . 基于 BP 神经网络的船舱温度预警系统[J]. 舰船科学技术，2017，39（1）：145-149. [10] 郑健 . 基于 BP 神经网络及模糊推理的温度预警模型研究[J]. 计算机测量与控制，2014，22（8）：2653-2655. [11] MATLAB 技术联盟，刘冰，郭海霞 . MATLAB 神经网络超级学习手册[M]. 北京：人民邮电出版社，2014. [12] 朱磊 . 基于模糊神经网络在智能家具信息融合的火灾信息探测算法研究[D]. 昆明：云南财经大学，2016. [13] 席爱明 . 模糊控制技术[M]. 西安：西安电子科技大学出版社，2008. [14] 周靖轩，朱玉军 . 基于模糊重心理论的石化企业火灾风险评估[J]. 消防科学与技术，2015，34（3）：399-401.

[责任编辑 杨 屹]

